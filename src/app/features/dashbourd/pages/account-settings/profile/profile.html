<div class="space-y-6">
  <div class="flex items-center gap-3">
    <i class="fa-regular fa-user text-blue-600 text-xl"></i>
    <span class="text-lg font-semibold text-gray-800">Account Settings</span>
  </div>

  <!-- Loading -->
  <div *ngIf="isLoading && !user" class="text-xs text-gray-500">
    Loading latest profile data...
  </div>

  <!-- Error when no user -->
  <div *ngIf="!isLoading && !user && errorMessage" class="text-xs text-red-500">
    {{ errorMessage }}
  </div>

  <!-- User Form -->
  <div *ngIf="user">
    <!-- Error message -->
    <div *ngIf="errorMessage" class="text-xs text-red-500">{{ errorMessage }}</div>

    <!-- Success message -->
    <div *ngIf="successMessage" class="text-xs text-green-600">{{ successMessage }}</div>

    <form class="grid grid-cols-1 lg:grid-cols-2 gap-6 text-xs"
          [formGroup]="profileForm"
          (ngSubmit)="onSaveChanges()">

      <div class="space-y-4">
        <div>
          <label class="block mb-1 text-gray-500">First name</label>
          <input class="w-full border border-gray-200 rounded px-3 py-2 text-gray-800"
                 formControlName="firstName" />
        </div>
        <div>
          <label class="block mb-1 text-gray-500">Username</label>
          <input class="w-full border border-gray-200 rounded px-3 py-2 text-gray-800"
                 formControlName="username" />
        </div>
        <div>
          <label class="block mb-1 text-gray-500">Phone</label>
          <input class="w-full border border-gray-200 rounded px-3 py-2 text-gray-800"
                 formControlName="phone" />
        </div>
      </div>

      <div class="space-y-4">
        <div>
          <label class="block mb-1 text-gray-500">Last name</label>
          <input class="w-full border border-gray-200 rounded px-3 py-2 text-gray-800"
                 formControlName="lastName" />
        </div>
        <div>
          <label class="block mb-1 text-gray-500">Email</label>
          <input class="w-full border border-gray-200 rounded px-3 py-2 text-gray-800"
                 formControlName="email" />
        </div>
      </div>

      <div class="flex flex-col sm:flex-row justify-end gap-3 pt-4 text-xs lg:col-span-2">
        <button
          type="button"
          class="px-6 py-2 border border-red-300 bg-red-50 text-red-500 rounded"
          [disabled]="isDeleting"
          (click)="onDeleteAccount()"
        >
          {{ isDeleting ? 'Deleting...' : 'Delete My Account' }}
        </button>

        <button
          type="submit"
          class="px-6 py-2 bg-blue-600 text-white rounded disabled:opacity-60"
          [disabled]="isSaving || profileForm.invalid"
        >
          {{ isSaving ? 'Saving...' : 'Save Changes' }}
        </button>
      </div>
    </form>
  </div>
</div>
